# 2μ¥. ν…μ¤νΈ

### μ¤ν”„λ§μ κ°€μ¥ ν•µμ‹¬μ μΈ κ°€μΉ = κ°μ²΄μ§€ν–¥μ„¤κ³„ & ν…μ¤νΈ

### μ‘μ€λ‹¨μ„μ ν…μ¤νΈ

- ν…μ¤νΈ λ€μƒμ΄ λ…ν™•ν•λ‹¤λ©΄ κ·Έ λ€μƒμ— μ§‘μ¤‘ν•΄μ„ ν…μ¤νΈ ν•λ” κ²ƒμ΄ λ°”λμ§.
β†’ λ‹¨μ„λ΅ μΌκ°μ„ ν…μ¤νΈν•λ‹¤λ©΄ μ§‘μ¤‘ν•λ©΄ μΆ‹λ‹¤.
- κ° λ‹¨μ„λ³„λ΅ ν…μ¤νΈλ¥Ό λ¨Όμ € μ§„ν–‰ν•κ³  λ‚μ„ κΈ΄ ν…μ¤νΈλ¥Ό μ§„ν–‰ ν•λ‹¤λ©΄?

### μλ™μν–‰ ν…μ¤νΈ μ½”λ“

- ν…μ¤νΈλ¥Ό μ§€μ†μ μΌλ΅ ν•λ” κ²ƒμ€ μ§€λ£¨ν•κ³  λ¶νΈν•¨ β†’ μλ™ν™”μ ν•„μ”μ„±
- λ³„λ„λ΅ ν…μ¤νΈμ© ν΄λμ¤λ¥Ό λ§λ“¤μ–΄μ„ ν…μ¤νΈ μ½”λ“λ¥Ό μ‚½μ…ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.

### μ§€μ†μ μΈ κ°μ„ κ³Ό μ μ§„μ μΈ κ°λ°μ„ μ„ν• ν…μ¤νΈ

- κ°€μ¥ λ‹¨μν• λ“±λ΅κ³Ό μ΅°νκΈ°λ¥μ„ λ§λ“¤κ³  μ΄λ¥Ό ν…μ¤νΈν•κ³  κ²€μ¦ν•΄μ„ λ§λ“  μ½”λ“μ— ν™•μ‹ μ„ κ°–λ”λ‹¤.
- μ΅°κΈμ”© μ μ§„μ μΈ κ°λ°μ΄ κ°€λ¥ν•λ‹¤.

---

### 2.2 UserDaoTest κ°μ„ 

- μλ°”μ—λ” λ‹¨μν•λ©΄μ„λ„ μ‹¤μ©μ μΈ ν…μ¤νΈλ¥Ό μ„ν• λ„κµ¬κ°€ μ—¬λ¬κ°€μ§€ μ΅΄μ¬.
- ***JUnit***
    - κΈ°μ΅΄μ main μ„ μ—†μ• κ³ , μ μ–΄λ¥Ό μ—­μ „ν•μ—¬ JUnit `ν”„λ μ„μ›ν¬` λ¥Ό μ΄μ©ν•΄λ³Έλ‹¤.
    - λ©”μ„λ“κ°€ public μ΄μ—¬μ•Ό ν•λ©°, @TEST μ–΄λ…Έν…μ΄μ…μ„ μ¶”κ°€ν•λ‹¤.

```java
@Test
public void addAndGet() throws SQLException{
	ApplicationContext context = 
		new ClassPathXmlApplicationContext("applicationContext.xml");
	UserDao dao = context.getBean("userDao", UserDao.class);
}
```

### κ²€μ¦ μ½”λ“ μ „ν™

`assertThat` μ΄λΌλ” μ¤ν…ν‹± λ©”μ„λ“λ¥Ό μ΄μ©ν•΄ λ‹¤μκ³Ό κ°™μ΄ λ³€κ²½ν•  μ μμµλ‹λ‹¤.

- `asertThat(user2.getName(),is(user.getName())`

---

### JUnit ν…μ¤νΈ μ‹¤ν–‰

- main λ©”μ†λ“μ— JUnitCore ν΄λμ¤λ¥Ό νΈμ¶ν•λ” κ°„λ‹¨ν• μ½”λ“λ¥Ό λ„£μ–΄μ¤€λ‹¤.

```java
JUnitCore.main("springbook.user.dao.UserDaoTest");
```

---

### 2.3.3 ν¬κ΄„μ μΈ ν…μ¤νΈ

- μ„±κ³µν•λ” ν…μ¤νΈ μΌ€μ΄μ¤λ§ ν…μ¤νΈν•κ² λλ‹¤. β†’ κΌΌκΌΌν•κ² μ¤€λΉ„λ μ‹λ‚λ¦¬μ¤λ¥Ό λ”°λΌ λ‹¤μ–‘ν• κ²½μ°μ ν…μ¤νΈ ν•„μ”.
- κΈ°λ¥μ„¤κ³„λ¥Ό μ„ν• ν…μ¤νΈ β†’ μ μ •μλ κΈ°λ¥ μ •μμ„

<aside>
π“ β€ν…μ¤νΈ μ£Όλ„ κ°λ°β€
- λ§λ“¤κ³ μν•λ” κΈ°λ¥μ λ‚΄μ©μ„ λ‹΄κ³  μμΌλ©΄μ„ λ§λ“¤μ–΄μ§„ μ½”λ“λ¥Ό κ²€μ¦λ„ ν•΄μ¤„ μμλ„λ΅ ν…μ¤νΈ μ½”λ“λ¥Ό λ¨Όμ € λ§λ“¤κ³  ν…μ¤νΈλ¥Ό μ„±κ³µν•κ² ν•΄μ£Όλ” β€μ½”λ“β€λ¥Ό μ‘μ„±ν•λ” λ°©μ‹
- μ¦‰, μ„  ν…μ¤νΈ ν›„ κΈ°λ¥ μ¶”κ°€
- ν…μ¤νΈλ¥Ό κΌΌκΌΌν λ§λ“¤μλ°–μ— μ—†λ‹¤.
- μ½”λ“λ¥Ό λ§λ“¤μ–΄ ν…μ¤νΈλ¥Ό μ‹¤ν–‰ν•λ” μΈν„°λ²μ΄ μ§§λ‹¤.

</aside>

- ν…μ¤νΈλ¥Ό μ κ·Ήμ μΌλ΅ μ‚¬μ©ν•μ§€ μ•λ” μ΄μ ?
- μ—”ν„°ν”„λΌμ΄μ¦κΈ‰ ν”„λ΅μ νΈμ ν…μ¤νΈκ°€ μ–΄λ µλ‹¤κ³  μƒκ°ν•κΈ° λ•λ¬Έ, μ‹¤μƒμ€ μ¤ν”„λ§μ—μ„ κ°μΆ… ν…μ¤νΈ μ§€μ›
- β€@Beforeβ€ μ–΄λ…Έν…μ΄μ… & β€@Afterβ€ μ–΄λ…Έν…μ΄μ…
- @Testκ°€ λ¶™μ€ publicμ΄κ³ , voidν• μ΄λ©° νλΌλ―Έν„°κ°€ μ—†λ” ν…μ¤νΈ μ½”λ“λ¥Ό μ°Ύκ³ ,
- @Before μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ λ©”μ„λ“λ¥Ό λ¨Όμ € μ‹¤ν–‰ν•λ‹¤.
- @Test μ–΄λ…Έν…μ΄μ… λ©”μ†λ“λ¥Ό μ‹¤ν–‰ν• ν›„ , @After μ–΄λ…Έν…μ΄μ… λ©”μ„λ“λ¥Ό μ‹¤ν–‰ν•λ‹¤.
- ***λ§¤λ² μƒλ΅μ΄ ν…μ¤νΈ μ¤λΈμ νΈλ¥Ό λ§λ“¦μ— μ£Όμ ν•λΌ.***

---

### 2.4 μ¤ν”„λ§ ν…μ¤νΈ μ μ©

- ν…μ¤νΈλ¥Ό μ„ν• μ•± μ»¨ν…μ¤νΈ κ΄€λ¦¬

```java
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations="/applicationContext.xml")
public class UserDaoTest{
	@Autowired
	private ApplicationContext context;
	...
	@Before
	public void setUp(){
		this.dao = this.context.getBean("userDao",UserDao.class);
	}
}
```

- context λ³€μμ— μ–΄ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ¤νΈκ°€ μ£Όμ…λμ—λ‹¤.
- @Runwith μ–΄λ…Έν…μ΄μ…μ€ Junit ν”„λ μ„μ›ν¬μ ν…μ¤νΈ μ‹¤ν–‰λ°©λ²•μ„ ν™•μ¥ν•  λ• μ‚¬μ©.
- @ContextConfiguration μλ™μΌλ΅ λ§λ“¤μ–΄μ¤„ μ–΄ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ¤νΈμ μ„¤μ •νμΌ μ„μΉ μ§€μ •.
- ν…μ¤νΈ μ „μ²΄μ Contextλ” ν•λ‚μ μ»¨ν…μ¤νΈλ΅ λ¨λ‘ λ™μΌν• μ»¨ν…μ¤νΈλ¥Ό κ°€μ§€κ³  μλ‹¤.
- λ‹¨, ν…μ¤νΈ μ¤λΈμ νΈ μμ²΄λ” κ³„μ†ν•΄μ„ μ΄κΈ°ν™”λκ³  μƒμ„±λλ‹¤.
- λΏλ§μ•„λ‹λΌ @ContextConfiguration μ–΄λ…Έν…μ΄μ…μ„ ν†µν•΄ ν…μ¤νΈ ν΄λμ¤κ°„ κ³µμ λ„ κ°€λ¥.

---

@AutoWired

- μ¤ν”„λ§ DI μ— μ‚¬μ©λλ” νΉλ³„ν• μ–΄λ…Έν…μ΄μ…
- ***ν•΄λ‹Ή μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ μΈμ¤ν„΄μ¤ λ³€μλ” μ»¨νƒμ¤νΈ λ‚΄ λΉμ„ μ°Ύκ³  ν•΄λ‹Ή μΈμ¤ν„΄μ¤ λ³€μλ΅. μ£Όμ…ν•μ—¬ μ¤€λ‹¤.***

---

### μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ DI λ°›μ•„μ•Ό ν•λ” μ΄μ 

- μ†ν”„νΈμ›¨μ–΄μ—μ„ λ³€ν•μ§€ μ•λ” κ²ƒμ€ μ—†λ‹¤. ν΄λμ¤ λ€μ‹  μΈν„°νμ΄μ¤λ¥Ό λ°›κ³  new λ¥Ό ν†µν• μƒμ„± λ€μ‹  DI ν•λ‹¤.
- ν΄λμ¤ κµ¬ν„ λ°©μ‹μ€ λ°”λ€μ§€ μ•λ”λ‹¤ ν•λ”λΌλ„ μΈν„°νμ΄μ¤λ¥Ό λ‘κ³  DIλ¥Ό μ μ©ν•κ² λ‘λ©΄ μ¶”κ°€μ μΈ μ„λΉ„μ¤ κΈ°λ¥μ„ λ„μ…ν•  μ μλ‹¤.
- λ§μ§€λ§‰μΌλ΅ ν¨μΈμ μΈ ν…μ¤νΈ ν™κ²½μ„ μ κ³µν•λ‹¤.

---

### λ²„κ·Έν…μ¤νΈμ™€ ν•™μµν…μ¤νΈλ¥Ό ν†µν•™ ν•™μµ