# [인덱스 기본]

<aside>
📌 인덱스의 탐색 과정은 수직적 탐색 & 수평적 탐색, 단 두 단계로 이루어집니다.

</aside>

- 기본적으로 인덱스는 큰 테이블에서 소량 데이터를 검색할 때 사용합니다.
1. 인덱스 스캔 효율화 튜닝(비효율을 줄인다.)
2. 랜덤 엑세스 최소화 튜닝(테이블 엑세스를 줄인다.)
- DBMS는 일반적으로 B*Tree인덱스를 사용 합니다.
- 키값을 기준으로 오른쪽은 크거나 같은, 왼쪽은 작은 레코드가 저장되어있음.

---

### 인덱스의 수직적 탐색

- 인덱스 스캔의 시작점을 찾는 과정입니다.
- 조건을 만족하는 첫번째 레코드를 찾는 과정입니다.

---

### 인덱스의 수평적 탐색

- 인덱스 리프 블록을 수평적으로 스캔합니다.
- 본격적으로 데이터를 찾습니다.
- 인덱스 리프블록 끼리는 인접한 리프 블록의 주소값을 갖습니다. (더블 링크드 리스트 구조)

---

<aside>
💡 B트리의 B는 밸런스의 약자로, 언제나 균형상태를 유지합니다. 즉, 루트로 부터 리프블록까지의 깊이(높이)는 모두 동일합니다.

</aside>

---

### 인덱스 기본 사용법

- 리프 블록에서 스캔 시작점을 찾아, 거기서부터 스캔하다가 종료점을 만나 멈추는 것을 의미합니다.(range Scan)
- 인덱스 range Scan의 첫번째 조건은 인덱스 선두 컬럼이 조건절에 있어야 한다.(가공되지 않은 상태로)
- 인덱스는 테이블과 달리 정렬되어 있다. (인덱스로 소트 연상을 생략함으로써 성능을 높일 수 있다.)
- 인덱스에서는 최소값과 최대값이 모두 정렬되어 있기때문에 정렬연산을 하지 않는다. 
→ 최소값은 리프블록의 가장 왼쪽, 최대값은 리프블록의 가장 오른쪽이 된다.

---

### 자동 형변환

- 각 조건절에서 양쪽 값의 데이터 타입이 다르면 값을 비교할 수 없고, 자동으로 형변환 해주거나 (오라클) 하지 않는 DBMS가 있다.
- 자동형변환은 편할 수도 있지만, 결론은 이 기능에 의존하지 않고 인덱스 컬럼 기준으로 정확히 형변환 해주어야 한다.
- SQL성능은 연산횟수 보다. 블록 입출력을 줄이는 것에 있다는 것을 잊지 말자.

---