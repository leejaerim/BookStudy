# [인덱스의 구성]

### 3.3.12 함수호출부하 해소를 위한 인덱스 구성

- 기본적으로 PL/SQL에서의 사용자함수는 느리다.
    - 가상머신상에서 실행되는 인터프리터 언어
    - 호출마다의 컨텍스트 스위칭
    - 내장 SQL의 리커전 콜 발생 → 레코드마다 내장 SQL콜 전부 실행. (가장 큰 이유)
    
    ```sql
    select GET_ADDR(우편번호) as 기본주소 from 회원 where 생년일 Like '%01';
    -- 다음과 같은 쿼리를 통해 출력되는 레코드가 100만건 이라고 한다면, GET_ADDR 함수 또한 100만건 실행된다.
    -- 이것이 JAVA ,C 와 다르게 SQL에서의 함수는 모듈, 공용화 하지 않는 이유이다.
    ```
    

---

### 3.4 인덱스의 설계

- 인덱스 설계는 매우 중요하고 전문적인 영역 → 무수한 인덱스 생성은 관비비용 + 시스템 부하
- DML 성능 저하, DB 사이즈 증가, DB 유지 보수 비용 증가.
- 중요한 요인 2가지 
- 조건절에 항상 사용하거나, 자주 사용하는 칼럼을 선정합니다.
- ‘=‘ 조건으로 자주 조회하는 칼럼을 선두에 둔다.
- 그외 판단기준*(수행빈도, 중요도, 클러스터링 팩터, 데이터량 , DML 부하, 저장공간,비용 등

---

### 전략적 설계

- 우리는 핵심적인 액세스 경로 한두개를 전략적으로 선택해, 최적 인덱스를 설계하고  나머지 액세스 경로에 대해 비효율이 있다하더라도 목표성능을 만족하는 수준으로 설계 및 튜닝해야 하며 그 이유까지 답할 수 있는 수준이여야 한다.
- 소트연산을 생략하기 위한 컬럼 추가