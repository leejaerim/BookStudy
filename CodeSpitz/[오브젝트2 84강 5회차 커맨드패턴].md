# [84강 오브젝트 5회차 커맨드패턴]

- Composite Pattern 을 사용하여 오브젝트를 순회하면서 실행시키려고 한다.
- 이때 우리는 커맨드 패턴에 대해 공부하고 적용하고자 한다.

---

- ***커맨드 클래스 인터페이스***

```java
public interface Command{
	public void excute();
	public void undo();
}
```

- 커맨드태스크 클래스

```java
public class CommandTask{
	private CompositeTask task;
	private List<Command> commands = new ArrayList<>();
	public CommandTask(String title, LocalDateTime date){
		this.task = new CompositeTask(title,date);
	}
	private void addCommond(Command cmd){
		commands.add(cmd);
		cmd.excute(task);
	}
	public void toggle(){
		Command cmd = new Toggle();
		addCommand(cmd)
	}
	public void setTitle(String title){
		Command cmd = new Title(title);//함수형 프로그래밍의 클로져처럼 자유변수 역할을 하게 됌
		addCommand(cmd)
	}
	...
}
```

- Toggle 클래스

```java
public class Toggle implement Command{
	@Override
	public void excute(CompositeTask task){
		task.toggle();
	}
	@Override
	public void undo(CompositeTask task){
		task.toggle();
	}
}
```

- Title 클래스

```java
public class Title implement Command{
	private final String title;
	private String oldTitle;
	public Title(String title){
		this.title = title;
	}
	@Override
	public void excute(CompositeTask task){
		oldTitle = task.getTitle();
		task.setTitle(title);
	}
	@Override
	public void unde(CompositeTask task){
		task.setTitle(oldtitle);
	}
}
```

- 이때 필드변수와 같이 인스턴스에서 사용하는 인스턴스 마다의 메모리에 저장되는 변수를 가지는 것을 명심하자.
    - 커맨드태스크 클래스에서 필요한 인스턴스 변수들을 모두 가지게 된다면 불필요한 메모리 낭비 될 수 있다.
- 여기서의 커맨드 패턴은 즉시실행처럼 보일 수 있지만(excute) ***커맨드 패턴의 장점은 실행과 구현을 분리시켜 원하는 시점에 실행할 수 있도록 하는 것이다.***
    - `cmd.excute(task)` 를 원하는 시점에서 호출하게 할 수 있다.(Not in addCommand(…))